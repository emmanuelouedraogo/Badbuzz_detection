# Ce fichier est utilisé par Azure App Service pour un déploiement multi-conteneurs.
# Il suppose que les images Docker ont déjà été construites et poussées
# vers un Azure Container Registry (ACR).

services:
  api:
    # Remplacez <your-acr-name> par le nom de votre ACR.
    # Azure remplacera dynamiquement cette valeur si vous configurez le webhook.
    # L'image 'latest' sera utilisée.
    image: ${{ secrets.ACR_LOGIN_SERVER }}/badbuzz-api:latest
    restart: unless-stopped
    # Les variables d'environnement comme PIPELINE_URL sont définies
    # dans les "Paramètres d'application" de l'App Service sur Azure.

  frontend:
    image: ${{ secrets.ACR_LOGIN_SERVER }}/badbuzz-frontend:latest
    restart: unless-stopped
    ports:
      # Mappe le port 8501 du conteneur au port 80 de l'App Service.
      # Azure redirigera automatiquement le trafic externe vers ce service.
      - "80:8501"